'use strict';
var app = angular.module('angularApp')
  .controller('AdvancedSampleResultsCtrl', function (sampleService,navigationService,groupService,utilsService,$scope,$rootScope,$filter,ngTableParams,$http,$location,$modal) {
    $rootScope.tabs = navigationService.get();
    $rootScope.groups = groupService.getGroups.data.get();
    $scope.sampleData = sampleService.sampleData;
    $scope.sampleQueries = sampleService.sampleQueries;
    $scope.compositionQueries = sampleService.compositionQueries;
    $scope.characterizationQueries = sampleService.characterizationQueries;    
    $scope.utilsService = utilsService;
    $scope.data = $scope.sampleData.data;

    // $scope.sampleData.data = {"samples":[{"sampleId":20917507,"sampleName":"NCL-23-1","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["NCL-23-1","20917507"]},{"type":"pointOfContact","val":[{"parentSampleId":0,"dataId":20917507,"displayName":"C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech","relatedEntityType":null,"relatedEntityId":0}]},{"type":"nanomaterialEntity","val":[{"parentSampleId":0,"dataId":43024384,"displayName":"carbon<br>coat (Coat)","relatedEntityType":null,"relatedEntityId":0}]},{"type":"functionalizingEntity","val":[{"parentSampleId":0,"dataId":43155460,"displayName":"antibody (anti body chem name)","relatedEntityType":null,"relatedEntityId":0}]},{"type":"function","val":[{"parentSampleId":0,"dataId":22719745,"displayName":"imaging function","relatedEntityType":"functionalizingEntity","relatedEntityId":0},{"parentSampleId":0,"dataId":43155460,"displayName":"imaging function: desc (imaging modality: gamma ray)","relatedEntityType":"functionalizingEntity","relatedEntityId":0}]},{"type":"physicalChemicalChar","val":[{"parentSampleId":0,"dataId":21867776,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0}]}],"rowCells":[{"Sample Name":"NCL-23-1"},{"point of contact name":["C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech"]},{"nanomaterial entity":["carbon<br>coat (Coat)"]},{"functionalizing entity":["antibody (anti body chem name)"]},{"function":["imaging function","imaging function: desc (imaging modality: gamma ray)"]},{"physico-chemical characterization":["molecular weight:molecular weight"]}],"rowCellRefs":{"physico-chemical characterization":[{"parentSampleId":0,"dataId":21867776,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0}],"point of contact name":[{"parentSampleId":0,"dataId":20917507,"displayName":"C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech","relatedEntityType":null,"relatedEntityId":0}],"functionalizing entity":[{"parentSampleId":0,"dataId":43155460,"displayName":"antibody (anti body chem name)","relatedEntityType":null,"relatedEntityId":0}],"nanomaterial entity":[{"parentSampleId":0,"dataId":43024384,"displayName":"carbon<br>coat (Coat)","relatedEntityType":null,"relatedEntityId":0}],"function":[{"parentSampleId":0,"dataId":22719745,"displayName":"imaging function","relatedEntityType":"functionalizingEntity","relatedEntityId":0},{"parentSampleId":0,"dataId":43155460,"displayName":"imaging function: desc (imaging modality: gamma ray)","relatedEntityType":"functionalizingEntity","relatedEntityId":0}]},"dataRow":{"sampleId":20917507,"sampleName":"NCL-23-1","pointOfContact":["C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech|20917507","C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech|20917507"],"nanomaterialEntity":["carbon<br>coat (Coat)|43024384","carbon<br>coat (Coat)|43024384"],"functionalizingEntity":["antibody (anti body chem name)|43155460","antibody (anti body chem name)|43155460"],"function":["imaging function|22719745","imaging function|22719745|functionalizingEntity","imaging function: desc (imaging modality: gamma ray)|43155460","imaging function: desc (imaging modality: gamma ray)|43155460|functionalizingEntity"],"physicalChemicalChar":["molecular weight:molecular weight|21867776","molecular weight:molecular weight|21867776"],"invivoChar":null,"invitroChar":null,"exvivoChar":null}},{"sampleId":67928066,"sampleName":"SY-NCL-23-1","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["SY-NCL-23-1","67928066"]},{"type":"pointOfContact","val":[{"parentSampleId":0,"dataId":67928066,"displayName":"C-Sixty (CNI) (John Doe)<br>DC","relatedEntityType":null,"relatedEntityId":0}]},{"type":"nanomaterialEntity","val":[{"parentSampleId":0,"dataId":68419584,"displayName":"carbon<br>coat (Coat)","relatedEntityType":null,"relatedEntityId":0}]},{"type":"functionalizingEntity","val":[{"parentSampleId":0,"dataId":68452361,"displayName":"antibody (anti body chem name)","relatedEntityType":null,"relatedEntityId":0}]},{"type":"function","val":[{"parentSampleId":0,"dataId":68452359,"displayName":"imaging function","relatedEntityType":"functionalizingEntity","relatedEntityId":0},{"parentSampleId":0,"dataId":68452361,"displayName":"imaging function: desc (imaging modality: gamma ray)","relatedEntityType":"functionalizingEntity","relatedEntityId":0}]},{"type":"physicalChemicalChar","val":[{"parentSampleId":0,"dataId":68288518,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0},{"parentSampleId":0,"dataId":68288522,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0},{"parentSampleId":0,"dataId":68288519,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0}]}],"rowCells":[{"Sample Name":"SY-NCL-23-1"},{"point of contact name":["C-Sixty (CNI) (John Doe)<br>DC"]},{"nanomaterial entity":["carbon<br>coat (Coat)"]},{"functionalizing entity":["antibody (anti body chem name)"]},{"function":["imaging function","imaging function: desc (imaging modality: gamma ray)"]},{"physico-chemical characterization":["molecular weight:molecular weight","molecular weight:molecular weight","molecular weight:molecular weight"]}],"rowCellRefs":{"physico-chemical characterization":[{"parentSampleId":0,"dataId":68288518,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0},{"parentSampleId":0,"dataId":68288522,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0},{"parentSampleId":0,"dataId":68288519,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0}],"point of contact name":[{"parentSampleId":0,"dataId":67928066,"displayName":"C-Sixty (CNI) (John Doe)<br>DC","relatedEntityType":null,"relatedEntityId":0}],"functionalizing entity":[{"parentSampleId":0,"dataId":68452361,"displayName":"antibody (anti body chem name)","relatedEntityType":null,"relatedEntityId":0}],"nanomaterial entity":[{"parentSampleId":0,"dataId":68419584,"displayName":"carbon<br>coat (Coat)","relatedEntityType":null,"relatedEntityId":0}],"function":[{"parentSampleId":0,"dataId":68452359,"displayName":"imaging function","relatedEntityType":"functionalizingEntity","relatedEntityId":0},{"parentSampleId":0,"dataId":68452361,"displayName":"imaging function: desc (imaging modality: gamma ray)","relatedEntityType":"functionalizingEntity","relatedEntityId":0}]},"dataRow":{"sampleId":67928066,"sampleName":"SY-NCL-23-1","pointOfContact":["C-Sixty (CNI) (John Doe)<br>DC|67928066","C-Sixty (CNI) (John Doe)<br>DC|67928066"],"nanomaterialEntity":["carbon<br>coat (Coat)|68419584","carbon<br>coat (Coat)|68419584"],"functionalizingEntity":["antibody (anti body chem name)|68452361","antibody (anti body chem name)|68452361"],"function":["imaging function|68452359","imaging function|68452359|functionalizingEntity","imaging function: desc (imaging modality: gamma ray)|68452361","imaging function: desc (imaging modality: gamma ray)|68452361|functionalizingEntity"],"physicalChemicalChar":["molecular weight:molecular weight|68288518","molecular weight:molecular weight|68288518","molecular weight:molecular weight|68288522","molecular weight:molecular weight|68288522","molecular weight:molecular weight|68288519","molecular weight:molecular weight|68288519"],"invivoChar":null,"invitroChar":null,"exvivoChar":null}},{"sampleId":69500928,"sampleName":"NCL-23-1-SY-CharTest","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["NCL-23-1-SY-CharTest","69500928"]},{"type":"pointOfContact","val":[{"parentSampleId":0,"dataId":69500928,"displayName":"C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech","relatedEntityType":null,"relatedEntityId":0}]},{"type":"nanomaterialEntity","val":[{"parentSampleId":0,"dataId":69337090,"displayName":"carbon<br>coat (Coat)","relatedEntityType":null,"relatedEntityId":0}]},{"type":"functionalizingEntity","val":[{"parentSampleId":0,"dataId":69369867,"displayName":"antibody (anti body chem name)","relatedEntityType":null,"relatedEntityId":0}]},{"type":"function","val":[{"parentSampleId":0,"dataId":69369865,"displayName":"imaging function","relatedEntityType":"functionalizingEntity","relatedEntityId":0},{"parentSampleId":0,"dataId":69369867,"displayName":"imaging function: desc (imaging modality: gamma ray)","relatedEntityType":"functionalizingEntity","relatedEntityId":0}]},{"type":"physicalChemicalChar","val":[{"parentSampleId":0,"dataId":69599238,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0},{"parentSampleId":0,"dataId":69599242,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0},{"parentSampleId":0,"dataId":69599239,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0},{"parentSampleId":0,"dataId":70778880,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0}]}],"rowCells":[{"Sample Name":"NCL-23-1-SY-CharTest"},{"point of contact name":["C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech"]},{"nanomaterial entity":["carbon<br>coat (Coat)"]},{"functionalizing entity":["antibody (anti body chem name)"]},{"function":["imaging function","imaging function: desc (imaging modality: gamma ray)"]},{"physico-chemical characterization":["molecular weight:molecular weight","molecular weight:molecular weight","molecular weight:molecular weight","molecular weight:molecular weight"]}],"rowCellRefs":{"physico-chemical characterization":[{"parentSampleId":0,"dataId":69599238,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0},{"parentSampleId":0,"dataId":69599242,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0},{"parentSampleId":0,"dataId":69599239,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0},{"parentSampleId":0,"dataId":70778880,"displayName":"molecular weight:molecular weight","relatedEntityType":null,"relatedEntityId":0}],"point of contact name":[{"parentSampleId":0,"dataId":69500928,"displayName":"C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech","relatedEntityType":null,"relatedEntityId":0}],"functionalizing entity":[{"parentSampleId":0,"dataId":69369867,"displayName":"antibody (anti body chem name)","relatedEntityType":null,"relatedEntityId":0}],"nanomaterial entity":[{"parentSampleId":0,"dataId":69337090,"displayName":"carbon<br>coat (Coat)","relatedEntityType":null,"relatedEntityId":0}],"function":[{"parentSampleId":0,"dataId":69369865,"displayName":"imaging function","relatedEntityType":"functionalizingEntity","relatedEntityId":0},{"parentSampleId":0,"dataId":69369867,"displayName":"imaging function: desc (imaging modality: gamma ray)","relatedEntityType":"functionalizingEntity","relatedEntityId":0}]},"dataRow":{"sampleId":69500928,"sampleName":"NCL-23-1-SY-CharTest","pointOfContact":["C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech|69500928","C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech|69500928"],"nanomaterialEntity":["carbon<br>coat (Coat)|69337090","carbon<br>coat (Coat)|69337090"],"functionalizingEntity":["antibody (anti body chem name)|69369867","antibody (anti body chem name)|69369867"],"function":["imaging function|69369865","imaging function|69369865|functionalizingEntity","imaging function: desc (imaging modality: gamma ray)|69369867","imaging function: desc (imaging modality: gamma ray)|69369867|functionalizingEntity"],"physicalChemicalChar":["molecular weight:molecular weight|69599238","molecular weight:molecular weight|69599238","molecular weight:molecular weight|69599242","molecular weight:molecular weight|69599242","molecular weight:molecular weight|69599239","molecular weight:molecular weight|69599239","molecular weight:molecular weight|70778880","molecular weight:molecular weight|70778880"],"invivoChar":null,"invitroChar":null,"exvivoChar":null}}],"columnTitles":[{"label":"Sample Name","value":"sampleName"},{"label":"point of contact name","value":"pointOfContact"},{"label":"nanomaterial entity","value":"nanomaterialEntity"},{"label":"functionalizing entity","value":"functionalizingEntity"},{"label":"function","value":"function"},{"label":"physico-chemical characterization","value":"physicalChemicalChar"}],"resultTable":{"columnTitles":[{"label":"Sample Name","value":"sampleName"},{"label":"point of contact name","value":"pointOfContact"},{"label":"nanomaterial entity","value":"nanomaterialEntity"},{"label":"functionalizing entity","value":"functionalizingEntity"},{"label":"function","value":"function"},{"label":"physico-chemical characterization","value":"physicalChemicalChar"}],"rows":[],"dataRows":[{"sampleId":20917507,"sampleName":"NCL-23-1","pointOfContact":["C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech|20917507","C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech|20917507"],"nanomaterialEntity":["carbon<br>coat (Coat)|43024384","carbon<br>coat (Coat)|43024384"],"functionalizingEntity":["antibody (anti body chem name)|43155460","antibody (anti body chem name)|43155460"],"function":["imaging function|22719745","imaging function|22719745|functionalizingEntity","imaging function: desc (imaging modality: gamma ray)|43155460","imaging function: desc (imaging modality: gamma ray)|43155460|functionalizingEntity"],"physicalChemicalChar":["molecular weight:molecular weight|21867776","molecular weight:molecular weight|21867776"],"invivoChar":null,"invitroChar":null,"exvivoChar":null},{"sampleId":67928066,"sampleName":"SY-NCL-23-1","pointOfContact":["C-Sixty (CNI) (John Doe)<br>DC|67928066","C-Sixty (CNI) (John Doe)<br>DC|67928066"],"nanomaterialEntity":["carbon<br>coat (Coat)|68419584","carbon<br>coat (Coat)|68419584"],"functionalizingEntity":["antibody (anti body chem name)|68452361","antibody (anti body chem name)|68452361"],"function":["imaging function|68452359","imaging function|68452359|functionalizingEntity","imaging function: desc (imaging modality: gamma ray)|68452361","imaging function: desc (imaging modality: gamma ray)|68452361|functionalizingEntity"],"physicalChemicalChar":["molecular weight:molecular weight|68288518","molecular weight:molecular weight|68288518","molecular weight:molecular weight|68288522","molecular weight:molecular weight|68288522","molecular weight:molecular weight|68288519","molecular weight:molecular weight|68288519"],"invivoChar":null,"invitroChar":null,"exvivoChar":null},{"sampleId":69500928,"sampleName":"NCL-23-1-SY-CharTest","pointOfContact":["C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech|69500928","C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech|69500928"],"nanomaterialEntity":["carbon<br>coat (Coat)|69337090","carbon<br>coat (Coat)|69337090"],"functionalizingEntity":["antibody (anti body chem name)|69369867","antibody (anti body chem name)|69369867"],"function":["imaging function|69369865","imaging function|69369865|functionalizingEntity","imaging function: desc (imaging modality: gamma ray)|69369867","imaging function: desc (imaging modality: gamma ray)|69369867|functionalizingEntity"],"physicalChemicalChar":["molecular weight:molecular weight|69599238","molecular weight:molecular weight|69599238","molecular weight:molecular weight|69599242","molecular weight:molecular weight|69599242","molecular weight:molecular weight|69599239","molecular weight:molecular weight|69599239","molecular weight:molecular weight|70778880","molecular weight:molecular weight|70778880"],"invivoChar":null,"invitroChar":null,"exvivoChar":null}],"diffRows":[]},"showPOC":false,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false,"errors":[]};

    // $scope.sampleData.data = {"samples":[{"sampleId":20917507,"sampleName":"NCL-23-1","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["NCL-23-1","20917507"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":20917507,"displayName":"C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":67928066,"sampleName":"SY-NCL-23-1","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["SY-NCL-23-1","67928066"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":67928066,"displayName":"C-Sixty (CNI) (John Doe)<br>DC","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":69500928,"sampleName":"NCL-23-1-SY-CharTest","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["NCL-23-1-SY-CharTest","69500928"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":69500928,"displayName":"C-Sixty (CNI) (John Doe)<br>DC<br>CP_UCLA_CalTech","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":32669696,"sampleName":"DC-GZhangMSEC2010-01","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["DC-GZhangMSEC2010-01","32669696"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":32669696,"displayName":"DC","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":32669697,"sampleName":"DC-GZhangMSEC2010-02","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["DC-GZhangMSEC2010-02","32669697"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":32669697,"displayName":"DC","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":32669698,"sampleName":"DC-GZhangMSEC2010-03","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["DC-GZhangMSEC2010-03","32669698"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":32669698,"displayName":"DC","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":32669699,"sampleName":"DC-GZhangMSEC2010-04","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["DC-GZhangMSEC2010-04","32669699"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":32669699,"displayName":"DC","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":32669700,"sampleName":"DC-GZhangMSEC2010-05","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["DC-GZhangMSEC2010-05","32669700"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":32669700,"displayName":"DC","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":32669701,"sampleName":"DC-GZhangMSEC2010-06","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["DC-GZhangMSEC2010-06","32669701"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":32669701,"displayName":"DC","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":32669702,"sampleName":"DC-GZhangMSEC2010-07","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["DC-GZhangMSEC2010-07","32669702"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":32669702,"displayName":"DC","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":32669703,"sampleName":"DC-GZhangMSEC2010-08","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["DC-GZhangMSEC2010-08","32669703"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":32669703,"displayName":"DC","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":32669704,"sampleName":"DC-GZhangMSEC2010-09","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["DC-GZhangMSEC2010-09","32669704"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":32669704,"displayName":"DC","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":32669705,"sampleName":"DC-GZhangMSEC2010-10","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["DC-GZhangMSEC2010-10","32669705"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":32669705,"displayName":"DC","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":32669707,"sampleName":"DC-GZhangMSEC2010-11","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["DC-GZhangMSEC2010-11","32669707"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":32669707,"displayName":"DC","relatedEntityType":null,"relatedEntityId":0}]}]},{"sampleId":51806210,"sampleName":"copy-AIST-KFujitaTL2009-02","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["copy-AIST-KFujitaTL2009-02","51806210"]},{"type":"POC","val":[{"parentSampleId":0,"dataId":51806210,"displayName":"GATECH_EMORY<br>DC (Bob Smith)<br>C-Sixty (CNI) (Shan Wang)<br>KU_JSTC_JAPAN (Tyler Doe)<br>GATECH_EMORY<br>DC (Shan Wang)","relatedEntityType":null,"relatedEntityId":0}]}]}],"columnTitles":[{"label":"Sample Name","value":"Sample"},{"label":"point of contact name","value":"POC"}],"showPOC":false,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false,"errors":[]} ;
    // $scope.test = {"samples":[{"sampleId":20917507,"sampleName":"NCL-23-1","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["NCL-23-1","20917507"]},{"type":"POC","val":["C-Sixty (CNI)","DC<br>23098","CP_UCLA_CalTech"]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":22424833,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":23768335,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":21867796,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":21867800,"displayName":"in vitro characterization:blood contact"}]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":21867776,"displayName":"physico-chemical characterization:molecular weight"}]}],"showPOC":true,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false},{"sampleId":67928066,"sampleName":"SY-NCL-23-1","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["SY-NCL-23-1","67928066"]},{"type":"POC","val":["C-Sixty (CNI)","DC<br>23098"]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":68288512,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":68288537,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":68288532,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":68288534,"displayName":"in vitro characterization:blood contact"}]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":68288518,"displayName":"physico-chemical characterization:molecular weight"},{"parentSampleId":0,"charId":68288522,"displayName":"physico-chemical characterization:molecular weight"},{"parentSampleId":0,"charId":68288519,"displayName":"physico-chemical characterization:molecular weight"}]}],"showPOC":true,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false},{"sampleId":69500928,"sampleName":"NCL-23-1-SY-CharTest","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["NCL-23-1-SY-CharTest","69500928"]},{"type":"POC","val":["C-Sixty (CNI)","DC<br>23098","CP_UCLA_CalTech"]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":69599232,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":69599257,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":69599252,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":69599254,"displayName":"in vitro characterization:blood contact"}]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":69599238,"displayName":"physico-chemical characterization:molecular weight"},{"parentSampleId":0,"charId":69599242,"displayName":"physico-chemical characterization:molecular weight"},{"parentSampleId":0,"charId":69599239,"displayName":"physico-chemical characterization:molecular weight"},{"parentSampleId":0,"charId":70778880,"displayName":"physico-chemical characterization:molecular weight"}]}],"showPOC":true,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false},{"sampleId":73367552,"sampleName":"NCL-23-1-SY-Test-CharDate","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["NCL-23-1-SY-Test-CharDate","73367552"]},{"type":"POC","val":["C-Sixty (CNI)","DC<br>23098","CP_UCLA_CalTech"]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":73498624,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":73498649,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":73498644,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":73498646,"displayName":"in vitro characterization:blood contact"}]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":73498634,"displayName":"physico-chemical characterization:molecular weight"},{"parentSampleId":0,"charId":73498631,"displayName":"physico-chemical characterization:molecular weight"}]}],"showPOC":true,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false},{"sampleId":57868288,"sampleName":"SY-Test-08-15","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["SY-Test-08-15","57868288"]},{"type":"POC","val":["DC<br>23098"]},{"type":"Characterization","val":[]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":98238464,"displayName":"physico-chemical characterization:molecular weight"}]}],"showPOC":true,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false}],"columnTitles":["Sample Name","Point Of Contact Name","in vitro characterization","physico-chemical characterization"],"showPOC":true,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false,"errors":[]};
    // $scope.test = {"samples":[{"sampleId":20917507,"sampleName":"NCL-23-1","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["NCL-23-1","20917507"]},{"type":"POC","val":["C-Sixty (CNI)","DC<br>23098","CP_UCLA_CalTech"]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":22424833,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":23768335,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":21867796,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":21867800,"displayName":"in vitro characterization:blood contact"}]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":21867776,"displayName":"physico-chemical characterization:molecular weight"}]}],"showPOC":true,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false},{"sampleId":67928066,"sampleName":"SY-NCL-23-1","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["SY-NCL-23-1","67928066"]},{"type":"POC","val":["C-Sixty (CNI)","DC<br>23098"]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":68288512,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":68288537,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":68288532,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":68288534,"displayName":"in vitro characterization:blood contact"}]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":68288518,"displayName":"physico-chemical characterization:molecular weight"},{"parentSampleId":0,"charId":68288522,"displayName":"physico-chemical characterization:molecular weight"},{"parentSampleId":0,"charId":68288519,"displayName":"physico-chemical characterization:molecular weight"}]}],"showPOC":true,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false},{"sampleId":69500928,"sampleName":"NCL-23-1-SY-CharTest","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["NCL-23-1-SY-CharTest","69500928"]},{"type":"POC","val":["C-Sixty (CNI)","DC<br>23098","CP_UCLA_CalTech"]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":69599232,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":69599257,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":69599252,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":69599254,"displayName":"in vitro characterization:blood contact"}]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":69599238,"displayName":"physico-chemical characterization:molecular weight"},{"parentSampleId":0,"charId":69599242,"displayName":"physico-chemical characterization:molecular weight"},{"parentSampleId":0,"charId":69599239,"displayName":"physico-chemical characterization:molecular weight"},{"parentSampleId":0,"charId":70778880,"displayName":"physico-chemical characterization:molecular weight"}]}],"showPOC":true,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false},{"sampleId":73367552,"sampleName":"NCL-23-1-SY-Test-CharDate","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["NCL-23-1-SY-Test-CharDate","73367552"]},{"type":"POC","val":["C-Sixty (CNI)","DC<br>23098","CP_UCLA_CalTech"]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":73498624,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":73498649,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":73498644,"displayName":"in vitro characterization:blood contact"},{"parentSampleId":0,"charId":73498646,"displayName":"in vitro characterization:blood contact"}]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":73498634,"displayName":"physico-chemical characterization:molecular weight"},{"parentSampleId":0,"charId":73498631,"displayName":"physico-chemical characterization:molecular weight"}]}],"showPOC":true,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false},{"sampleId":57868288,"sampleName":"SY-Test-08-15","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":null,"editable":false,"columns":[{"type":"Sample","val":["SY-Test-08-15","57868288"]},{"type":"POC","val":["DC<br>23098"]},{"type":"Characterization","val":[]},{"type":"Characterization","val":[{"parentSampleId":0,"charId":98238464,"displayName":"physico-chemical characterization:molecular weight"}]}],"showPOC":true,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false}],"columnTitles":["Sample Name","Point Of Contact Name","in vitro characterization","physico-chemical characterization"],"showPOC":true,"showNanomaterialEntity":false,"showFunctionalizingEntity":false,"showFunction":false,"errors":[]};
    // $scope.pocDetails ={"sampleId":20917507,"sampleName":"NCL-23-1","pointOfContact":null,"composition":null,"functions":null,"characterizations":null,"dataAvailability":null,"createdDate":1407951881000,"keywords":"MAGNEVIST<br>MRI<br>NCL-23<br>QA<br>TEST","pointOfContactMap":{"organizationDisplayName":["C-Sixty (CNI)","DC<br>23098","CP_UCLA_CalTech"],"primaryContact":["true","false","false"],"role":["","",""],"contactPerson":["John Doe","",""]},"pocBeanDomainId":52985856,"availableEntityNames":null,"caNanoLabScore":null,"mincharScore":null,"chemicalAssocs":null,"physicoChars":null,"invitroChars":null,"invivoChars":null,"caNano2MINChar":null,"errors":[],"caNanoMINChar":null};
    // go back to search form //
    $scope.goBack = function() {
      $location.path("/advancedSampleSearch").replace();      
    }; 


    // pops up modal window and passes in data. parameters = data and templateUrl and controller //
    $scope.popupModal = function(data,templateUrl,controller) {
        var modalInstance = $modal.open({
          templateUrl: templateUrl,
          controller: controller,
          windowClass: 'sample-modal-window',
          resolve: {
            data: function () {
              return data;
            }   
          }
        });
    };

    // call rest call to get poc details when details link is clicked //
    $scope.showPocDetails = function(sampleId) {
      $scope.loader = true;
      $http({method: 'GET', url: '/caNanoLab/rest/sample/view?sampleId='+sampleId}).
      success(function(data, status, headers, config) {
        $scope.pocDetails = data;
        $scope.loader = false;
        $scope.popupModal($scope.pocDetails,'views/sample/view/modal/pocDetails.html','PocDetailsCtrl')
      }).
      error(function(data, status, headers, config) {
        $scope.message = data;
        $scope.loader = false;
      });       
    };
    
    $scope.showCharDetails = function(sampleId, charId) {
        $scope.loader = true;
        $http({method: 'GET', url: '/caNanoLab/rest/characterization/viewCharacterization?charId='+charId}).
        success(function(data, status, headers, config) {
          $scope.pocDetails = data;
          $scope.loader = false;
          $scope.popupModal($scope.pocDetails,'views/sample/view/modal/charDetails.html','CharDetailsCtrl')
        }).
        error(function(data, status, headers, config) {
          $scope.message = data;
          $scope.loader = false;
        });       
      };
      
      
      $scope.showNanoMaterialDetails = function(sampleId, dataId) {
          $scope.loader = true; 
          $http({method: 'GET', url: '/caNanoLab/rest/nanomaterialEntity/viewDetails?sampleId='+sampleId+'&dataId='+dataId}).
          success(function(data, status, headers, config) {
            $scope.compositionData = data;
            $scope.loader = false;
           $scope.popupModal($scope.compositionData,'views/sample/view/modal/nanoEntityDetails.html','NanoMaterialDetailsCtrl');
          }).
          error(function(data, status, headers, config) {
            $scope.message = data;
            $scope.loader = false;
          }); 
        };
        
        $scope.showFunctionalizingEntityDetails = function(sampleId, dataId) {
            $scope.loader = true; 
            $http({method: 'GET', url: '/caNanoLab/rest/functionalizingEntity/viewDetails?sampleId='+sampleId+'&dataId='+dataId}).
            success(function(data, status, headers, config) {
              $scope.compositionData = data;
              $scope.loader = false;
              $scope.popupModal($scope.compositionData,'views/sample/view/modal/funcEntityDetails.html','FunctionalizingEntityDetailsCtrl')
            }).
            error(function(data, status, headers, config) {
              $scope.message = data;
              $scope.loader = false;
            }); 
        };

    // gets sample being clicked on and determines if it is edit or view. //
    // redirects to updateSample or sample page //
    $scope.displaySample = function(sampleId) {
      $http({method: 'GET', url: '/caNanoLab/rest/sample/isSampleEditable?sampleId='+sampleId}).
      success(function(data, status, headers, config) {
        var isEditable = data;
        if (isEditable=='true') {
            $location.path("/editSample").search({'sampleId':sampleId,'isAdvancedSearch':1}).replace();      
        }
        else {
            $location.path("/sample").search({'sampleId':sampleId,'isAdvancedSearch':1}).replace();      
        };
      }).
      error(function(data, status, headers, config) {
        $scope.message = data;
      });
    };


    var data = $scope.sampleData.data.resultTable.dataRows;
    // $scope.sampleData.data  = data;
    // if (data==null) {
    //   $scope.sampleData.data = [];
    //   data = [];
    //   $location.path("/advancedSampleSearch").search({}).replace();
    // }  

            $scope.tableParams = new ngTableParams({
                page: 1,            // show first page
                count: 10,          // count per page
                filter: {
                    name: 'M'       // initial filter
                }
            }, {
                counts:[],
                total: data.length, // length of data
                getData: function($defer, params) {
                    // use build-in angular filter
                    var orderedData = params.sorting() ?
                            $filter('orderBy')(data, params.orderBy()) :
                            data;

                    $defer.resolve(orderedData.slice((params.page() - 1) * params.count(), params.page() * params.count()));
                }
            });

  
  });